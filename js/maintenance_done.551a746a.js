(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["maintenance_done"],{"268a":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("datatable-heading",{attrs:{searchColumn:t.searchColumn,changeSearchColumn:t.changeSearchColumn,changePageSize:t.changePageSize,searchChange:t.searchChange,from:t.from,to:t.to,total:t.total,perPage:t.perPage,title:t.title}}),t._v(" "),a("b-row",[a("b-colxx",{attrs:{xxs:"12"}},[t.sum?a("h2",[t._v("Total: "),a("span",{staticClass:"text-primary"},[t._v("$"+t._s(t.sum))])]):t._e(),t._v(" "),a("vuetable",{ref:"vuetable",staticClass:"table-divided order-with-arrow",attrs:{"api-mode":!1,items:t.records,"data-manager":t.dataManager,"query-params":t.makeQueryParams,"per-page":t.perPage,"append-params":t.moreParams,fields:t.fields,"pagination-path":"pagination"},on:{"vuetable:pagination-data":t.onPaginationData},scopedSlots:t._u([{key:"amount",fn:function(e){return[t._v("\n          $"+t._s(e.rowData.amount)+"\n        ")]}},{key:"cost",fn:function(e){return[t._v("\n          $"+t._s(e.rowData.cost)+"\n        ")]}},{key:"sub_total",fn:function(e){return[t._v("\n          $"+t._s(e.rowData.sub_total)+"\n        ")]}}])}),t._v(" "),a("vuetable-pagination-bootstrap",{ref:"pagination",staticClass:"mt-4",on:{"vuetable-pagination:change-page":t.onChangePage}})],1)],1)],1)},n=[],i=(a("a623"),a("4de4"),a("caad"),a("fb6a"),a("ac1f"),a("2532"),a("841c"),a("1276"),a("c3d0")),r=a("9484"),l=(a("2b47"),a("c2a8")),o={props:["title","fields","data","searchColumn","sum"],components:{vuetable:i["a"],"vuetable-pagination-bootstrap":r["a"],"datatable-heading":l["a"]},data:function(){return{moreParams:{},isLoad:!1,sort:"",page:1,perPage:10,search:"",from:0,to:0,total:0,lastPage:0,items:[],records:[],selectedItems:[],sColumn:[],selectedSearchColumn:this.searchColumn[0]}},methods:{changeSearchColumn:function(t){this.selectedSearchColumn=t,console.log("search column changed to : ",t)},dataManager:function(t,e){if(!(this.records.length<1)){var a=this.records;t.length>0&&(a=_.orderBy(a,t[0].sortField,t[0].direction)),e=this.$refs.vuetable.makePagination(a.length,this.perPage);var s=e.from-1,n=s+this.perPage;return{pagination:e,data:_.slice(a,s,n)}}},makeQueryParams:function(t,e,a){return this.selectedItems=[],t[0]?{sort:t[0]?t[0].field+"|"+t[0].direction:"",page:e,per_page:this.perPage,search:this.search}:{page:e,per_page:this.perPage,search:this.search}},onPaginationData:function(t){this.from=t.from,this.to=t.to,this.total=t.total,this.lastPage=t.last_page,this.items=t.data,this.$refs.pagination.setPaginationData(t)},onChangePage:function(t){console.log(t),this.$refs.vuetable.changePage(t)},changePageSize:function(t){this.perPage=t,this.$refs.vuetable.refresh()},searchChange:function(t){this.search=t,this.items=this.filteredList,this.$refs.vuetable.refresh()}},computed:{filteredList:function(){var t=this;return this.array=this.data,this.array.filter((function(e){return""==t.search?t.data:t.search.toLowerCase().split(" ").every((function(a){return e[t.selectedSearchColumn].toLowerCase().includes(a)}))}))}},mounted:function(){},watch:{searchColumn:function(t){this.sColumn=this.searchColumn},data:function(t){this.items=t},filteredList:function(t){this.records=this.filteredList},items:function(t,e){this.$refs.vuetable.refresh()},sum:function(t,e){this.sum=t}}},c=o,u=a("2877"),d=Object(u["a"])(c,s,n,!1,null,null,null);e["a"]=d.exports},5309:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("b-row",[a("b-colxx",{attrs:{xxs:"12"}},[a("b-card",{staticClass:"mb-4"},[a("datatable",{attrs:{title:t.$t("menu.reports.list-of-maintenance-done"),searchColumn:t.searchColumns,data:t.maintenance_list,fields:t.fields}})],1),t._v(" "),a("button",{staticClass:"btn btn-primary",on:{click:function(){t.$router.push("/app/reports")}}},[t._v("Back to reports menu")])],1)],1)],1)},n=[],i=a("268a"),r=a("2b47"),l=a("cee4"),o={components:{datatable:i["a"]},data:function(){return{maintenance_list:[],searchColumns:["vehicle","mileage","date","service_type","cost","part_replaced"],fields:[{name:"vehicle",sortField:"vehicle",title:"Vehicle",titleClass:"",dataClass:"text-muted",width:"20%"},{name:"mileage",sortField:"mileage",title:"Mileage",titleClass:"",dataClass:"text-muted",width:"10%"},{name:"date",sortField:"date",title:"Date",titleClass:"",dataClass:"text-muted",width:"10%"},{name:"service_type",sortField:"service_type",title:"Service Type",titleClass:"",dataClass:"text-muted",width:"10%"},{name:"cost",sortField:"cost",title:"Cost",titleClass:"",dataClass:"text-muted",width:"10%"},{name:"part_replaced",sortField:"part_replaced",title:"Part Replaced",titleClass:"",dataClass:"text-muted",width:"10%"},{name:"comments",sortField:"comments",title:"Comments",titleClass:"",dataClass:"text-muted",width:"20%"}]}},methods:{get_maintenance_list:function(){var t=this;l["a"].get(r["a"]+"/reports/maintenance_list",{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then((function(e){t.maintenance_list=e.data}))}},mounted:function(){this.get_maintenance_list(),null!==localStorage.getItem("token")?this.$store.commit("setUser",JSON.parse(localStorage.getItem("user"))):this.$router.push("/user/login")}},c=o,u=a("2877"),d=Object(u["a"])(c,s,n,!1,null,null,null);e["default"]=d.exports},a623:function(t,e,a){"use strict";var s=a("23e7"),n=a("b727").every,i=a("a640"),r=a("ae40"),l=i("every"),o=r("every");s({target:"Array",proto:!0,forced:!l||!o},{every:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}})},c2a8:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-row",[a("b-colxx",{attrs:{xxs:"12"}},[a("h1",[t._v(t._s(t.title))]),t._v(" "),a("div",{staticClass:"mb-2 mt-2"},[a("b-button",{directives:[{name:"b-toggle",rawName:"v-b-toggle.displayOptions",modifiers:{displayOptions:!0}}],staticClass:"pt-0 pl-0 d-inline-block d-md-none",attrs:{variant:"empty"}},[t._v("\n        "+t._s(t.$t("pages.display-options"))+"\n        "),a("i",{staticClass:"simple-icon-arrow-down align-middle"})]),t._v(" "),a("b-collapse",{staticClass:"d-md-block",attrs:{id:"displayOptions"}},[a("div",{staticClass:"d-block d-md-inline-block pt-1"},[a("div",{staticClass:"search-sm d-inline-block float-md-left mr-1 align-top"},[a("b-input",{attrs:{placeholder:t.$t("menu.search")},on:{input:function(e){return t.searchChange(e)}}}),t._v(" "),t.searchColumn?a("div",{staticClass:"mt-2 badge badge-light"},[t._v("Search by "+t._s(t.selectedSearchColumn))]):t._e()],1),t._v(" "),t.searchColumn?a("div",{staticClass:"d-inline-block  ml-2 align-top"},[a("b-dropdown",{staticClass:"d-inline-block",attrs:{id:"ddown2",right:"",text:"Search Column : "+t.searchColumn[0],variant:"outline-dark",size:"xs"}},t._l(t.searchColumn,(function(e,s){return a("b-dropdown-item",{key:s,on:{click:function(a){return t.switchSearchColumn(e)}}},[t._v(t._s(e))])})),1)],1):t._e()]),t._v(" "),a("div",{staticClass:"float-md-right pt-1"},[a("span",{staticClass:"text-muted text-small mr-1 mb-2"},[t._v(t._s(t.from)+"-"+t._s(t.to)+" of "+t._s(t.total))]),t._v(" "),a("b-dropdown",{staticClass:"d-inline-block",attrs:{id:"ddown2",right:"",text:""+t.perPage,variant:"outline-dark",size:"xs"}},t._l(t.pageSizes,(function(e,s){return a("b-dropdown-item",{key:s,on:{click:function(a){return t.changePageSize(e)}}},[t._v(t._s(e))])})),1)],1)])],1),t._v(" "),a("div",{staticClass:"separator mb-5"})])],1)},n=[],i={props:["title","selectAll","isSelectedAll","isAnyItemSelected","keymap","changePageSize","searchChange","from","to","total","perPage","searchColumn","changeSearchColumn"],data:function(){return{categories:[{label:"Cakes",value:"Cakes"},{label:"Cupcakes",value:"Cupcakes"},{label:"Desserts",value:"Desserts"}],statuses:[{text:"ON HOLD",value:"ON HOLD"},{text:"PROCESSED",value:"PROCESSED"}],sortOptions:[{column:"title",label:"Product Name"},{column:"category",label:"Category"},{column:"status",label:"Status"}],pageSizes:[5,10],selectedSearchColumn:null}},methods:{switchSearchColumn:function(t){this.selectedSearchColumn=t,this.changeSearchColumn(t)}},mounted:function(){}},r=i,l=a("2877"),o=Object(l["a"])(r,s,n,!1,null,null,null);e["a"]=o.exports}}]);